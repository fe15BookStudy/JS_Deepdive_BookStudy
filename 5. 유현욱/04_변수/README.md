# 모던 자바스크립트 Deep Dive

## 04장 변수

**변수**는 하나의 값을 저장하기 위해 확보한 메모리 공간이자 공간을 식별하기 위해 붙인 이름이다. 간단히 말해 값의 위치를 가리키는 상징적인 이름임. 변수를 통해 안전하게 접근할 수있다.

### 변수에 여러개의 값을 저장하는방법

```javascript
var userId = 1;
var userName = Yoo;

// 객체나 배열 같은 자료구조를 사용하면 그룹화해서 하나의 값처럼 사용가능
var users = [
  { id: 1, name: Yoo },
  { id: 2, name: wook }
];
```
변수를 생성하면 예를들어 var a; 라고하면 a이름을 등록하고 값을 저장할 메모리 공간을 확보한다. 메모리 공간이 비어 있을 것이라 생각하지만 자바스크립트 엔진에 의해  undifined라는 값이 암묵적으로 할당되어 초기화된다.

변수이름을 비롯한 모든 식별자는 **실행 컨텍스트**에 등록된다. 변수이름과 변수  값은 실행 컨텍스트 내에 **키(key)/값(value)** 형식으로 등록되어 관리된다.

1 + 2 를 연산하면 3이나오는데 연산을 통해 나온 새로운 값은 1이나 2에 덮어씌우는 것이 아니라 새로운 메모리를 할당해서 거기에 저장한다.
### 예시
```javascript
var a = 1; 
var b = 2;
var c;
c = a + b; //a+b는 3인데 3을 저장할 메모리공간을 확보해 3을 저장하고 c가 저장되어 있는 3의 메모리 주소를 기억한다.
```
<br>
자바스크립트는 인터프리터에 의해 한줄씩 순차적으로 실행되는데 변수를 선언안하고 변수에 접근하면 에러가 날거라고 생각하지만 그게아니다.

```javascript
console.log(a);
var a;
```
위의 코드를 보면 에러가 날것 같지만 undifined가 나온다. 사실 변수선언은 코드가 한줄 한줄 실행될때 선언되는 것이 아니라 자바스크립트 엔진이 그 이전 단계인 평가 과정에서 변수 선언을 포함한 모든 선언문을 코드에서 찾아내 먼저 실행하기 때문이다. 그 이후에 선언문들을 제외하고 코드를 한줄 한줄 실행한다<br>
이처럼 변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징을 **변수 호이스팅(variable hosting)**이라 한다.

```javascript
var a; //undifined
a = 80; //값의 할당
a = 90; //값의 재할당
```
위의 코드를 보면 undifined와 80은 더 이상 필요하지 않다. 이렇게 불필요한 값들은 가비지 콜렉터에 의해 자동으로 메모리가 해제된다. **가비지 콜렉터**는 메모리 공간을 주기적으로 검사하여 더 이상 필요하지 않는 메모리를 해제 하는 기능이다. 이를 통해 메모리 누수를 방지한다.

추가로 프로그래밍 언어는 언매니지드 언어(unmanaged language)와 매니지드 언어(managed language)가 있는데 javascript가 언매니지드 언어이고 c가 매니지드 언어이다. c언어같은 경우는 직접 메모리를 할당하고 해제하여 개발자의 역량에 따라 성능을 올릴수 있지만 치명적인 오류가 나타날 가능성이 있다. javascript는 메모리 관리를 알아서 해주기 때문에 일정한 생산성을 가질 수 있지만 어느정도의 성능 손실을 갖는다.

